{
  "openapi": "3.0.0",
  "paths": {
    "/messages": {
      "post": {
        "operationId": "MessagesController_create",
        "summary": "创建新消息",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "消息创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "properties": {
                        "code": {
                          "type": "number",
                          "example": 201
                        },
                        "message": {
                          "type": "string",
                          "example": "success"
                        },
                        "data": {
                          "$ref": "#/components/schemas/Message"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/chat/{chatId}": {
      "get": {
        "operationId": "MessagesController_findAll",
        "summary": "获取聊天室消息",
        "parameters": [
          {
            "name": "chatId",
            "required": true,
            "in": "path",
            "description": "聊天室ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "TEXT",
                "VOICE",
                "FILE",
                "LINK",
                "IMAGE",
                "VIDEO"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取消息列表",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "properties": {
                        "code": {
                          "type": "number",
                          "example": 200
                        },
                        "message": {
                          "type": "string",
                          "example": "success"
                        },
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Message"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/unread": {
      "get": {
        "operationId": "MessagesController_getUnreadMessages",
        "summary": "获取未读消息",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "query",
            "description": "用户ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取未读消息"
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/{id}": {
      "patch": {
        "operationId": "MessagesController_update",
        "summary": "更新消息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "消息ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMessageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "消息更新成功"
          }
        },
        "tags": [
          "messages"
        ]
      },
      "delete": {
        "operationId": "MessagesController_remove",
        "summary": "删除消息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "消息ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "消息删除成功"
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/{id}/status": {
      "patch": {
        "operationId": "MessagesController_updateStatus",
        "summary": "更新消息状态",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "消息ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMessageStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "消息状态更新成功"
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/batch/status": {
      "patch": {
        "operationId": "MessagesController_updateManyStatus",
        "summary": "批量更新消息状态",
        "parameters": [],
        "responses": {
          "200": {
            "description": "消息状态批量更新成功"
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/chats": {
      "get": {
        "operationId": "MessagesController_getUserChats",
        "summary": "获取用户的聊天列表",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取聊天列表"
          }
        },
        "tags": [
          "messages"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "MessagesController_createChat",
        "summary": "创建新的聊天",
        "parameters": [],
        "responses": {
          "201": {
            "description": "聊天创建成功"
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/upload": {
      "post": {
        "operationId": "MessagesController_uploadFile",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "messages"
        ]
      }
    },
    "/messages/chats/{id}": {
      "get": {
        "operationId": "MessagesController_getChatById",
        "summary": "获取聊天详情",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "聊天ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number"
                        },
                        "name": {
                          "type": "string"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "DIRECT",
                            "GROUP"
                          ]
                        },
                        "participants": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number"
                              },
                              "username": {
                                "type": "string"
                              },
                              "avatar": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "messages"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/messages/chat/{chatId}/messages": {
      "get": {
        "operationId": "MessagesController_getChatMessages",
        "summary": "获取聊天消息历史",
        "parameters": [
          {
            "name": "chatId",
            "required": true,
            "in": "path",
            "description": "聊天ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取消息历史"
          }
        },
        "tags": [
          "messages"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/users/register": {
      "post": {
        "operationId": "UsersController_create",
        "summary": "注册新用户",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "用户创建成功"
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/login": {
      "post": {
        "operationId": "UsersController_login",
        "summary": "用户登录",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功"
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/logout": {
      "post": {
        "operationId": "UsersController_logout",
        "summary": "用户登出",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/friend-requests": {
      "post": {
        "operationId": "UsersController_sendFriendRequest",
        "summary": "发送好友请求",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFriendRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "请求发送成功"
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "UsersController_getFriendRequests",
        "summary": "获取发给我的好友请求",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "PENDING",
                "ACCEPTED",
                "REJECTED"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功"
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/friend-requests/{id}": {
      "patch": {
        "operationId": "UsersController_handleFriendRequest",
        "summary": "处理好友请求",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFriendRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "请求处理成功"
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/users/friends": {
      "get": {
        "operationId": "UsersController_getFriends",
        "summary": "获取好友列表",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功"
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/users/search": {
      "get": {
        "operationId": "UsersController_searchUsers",
        "summary": "搜索用户",
        "parameters": [
          {
            "name": "keyword",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "搜索成功"
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/users/org-structure": {
      "get": {
        "operationId": "UsersController_getOrgStructure",
        "summary": "获取组织架构",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取组织架构",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "type": {
                            "type": "number"
                          },
                          "order": {
                            "type": "number"
                          },
                          "children": {
                            "type": "array"
                          },
                          "users": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "avatar": {
                                  "type": "string"
                                },
                                "dutyName": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/json-data": {
      "get": {
        "operationId": "UsersController_getUserJsonData",
        "summary": "获取组织架构用户数据",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取数据",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "avatar": {
                            "type": "string"
                          },
                          "deptId": {
                            "type": "string"
                          },
                          "dutyName": {
                            "type": "string"
                          },
                          "state": {
                            "type": "number"
                          },
                          "orgsInfo": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "type": {
                                  "type": "number"
                                },
                                "order": {
                                  "type": "number"
                                },
                                "path": {
                                  "type": "array"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "users"
        ]
      }
    },
    "/users/profile": {
      "get": {
        "operationId": "UsersController_getProfile",
        "summary": "获取当前用户信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number"
                        },
                        "username": {
                          "type": "string"
                        },
                        "avatar": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/users/{id}": {
      "get": {
        "operationId": "UsersController_getUserInfo",
        "summary": "获取指定用户信息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number"
                        },
                        "username": {
                          "type": "string"
                        },
                        "avatar": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/redis/test/connection": {
      "get": {
        "operationId": "RedisController_testConnection",
        "summary": "测试 Redis 连接",
        "parameters": [],
        "responses": {
          "200": {
            "description": "连接测试结果"
          }
        },
        "tags": [
          "redis"
        ]
      }
    },
    "/redis/test/set-get": {
      "get": {
        "operationId": "RedisController_testSetGet",
        "summary": "测试 Redis 设置和获取值",
        "parameters": [],
        "responses": {
          "200": {
            "description": "设置和获取测试结果"
          }
        },
        "tags": [
          "redis"
        ]
      }
    },
    "/organizations/structure": {
      "get": {
        "operationId": "OrganizationsController_getStructure",
        "summary": "获取组织架构",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取组织架构",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "type": {
                            "type": "number"
                          },
                          "order": {
                            "type": "number"
                          },
                          "children": {
                            "type": "array"
                          },
                          "users": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "avatar": {
                                  "type": "string"
                                },
                                "dutyName": {
                                  "type": "string"
                                },
                                "employeeId": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "organizations"
        ]
      }
    },
    "/organizations/{id}/users": {
      "get": {
        "operationId": "OrganizationsController_getDepartmentUsers",
        "summary": "获取部门用户列表",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "部门ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取部门用户列表",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "avatar": {
                            "type": "string"
                          },
                          "dutyName": {
                            "type": "string"
                          },
                          "employeeId": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "organizations"
        ]
      }
    },
    "/meetings": {
      "post": {
        "operationId": "MeetingsController_createMeeting",
        "summary": "创建会议",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMeetingDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "会议创建成功"
          }
        },
        "tags": [
          "meetings"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "MeetingsController_getMeetings",
        "summary": "获取会议列表",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取会议列表"
          }
        },
        "tags": [
          "meetings"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/meetings/{id}/join": {
      "post": {
        "operationId": "MeetingsController_joinMeeting",
        "summary": "加入会议",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功加入会议"
          }
        },
        "tags": [
          "meetings"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/meetings/{id}/leave": {
      "post": {
        "operationId": "MeetingsController_leaveMeeting",
        "summary": "离开会议",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功离开会议"
          }
        },
        "tags": [
          "meetings"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/meetings/{id}": {
      "get": {
        "operationId": "MeetingsController_getMeetingInfo",
        "summary": "获取会议信息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取会议信息"
          }
        },
        "tags": [
          "meetings"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/documents": {
      "post": {
        "operationId": "DocumentsController_createDocument",
        "summary": "创建文档",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDocumentDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "documents"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "DocumentsController_getDocuments",
        "summary": "获取文档列表",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "documents"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/documents/{id}": {
      "get": {
        "operationId": "DocumentsController_getDocument",
        "summary": "获取文档详情",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "documents"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/documents/{id}/collaborators": {
      "post": {
        "operationId": "DocumentsController_addCollaborator",
        "summary": "添加协作者",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddCollaboratorDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "documents"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    }
  },
  "info": {
    "title": "Chat API",
    "description": "The chat API description",
    "version": "1.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "messages",
      "description": "消息相关接口"
    },
    {
      "name": "users",
      "description": "用户相关接口"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "TextMetadata": {
        "type": "object",
        "properties": {
          "format": {
            "type": "string",
            "description": "文本格式"
          }
        }
      },
      "FileMetadata": {
        "type": "object",
        "properties": {
          "fileName": {
            "type": "string",
            "description": "文件名"
          },
          "fileSize": {
            "type": "number",
            "description": "文件大小(bytes)"
          },
          "mimeType": {
            "type": "string",
            "description": "文件类型"
          },
          "url": {
            "type": "string",
            "description": "文件URL"
          }
        },
        "required": [
          "fileName",
          "fileSize",
          "mimeType",
          "url"
        ]
      },
      "VoiceMetadata": {
        "type": "object",
        "properties": {
          "duration": {
            "type": "number",
            "description": "语音时长(秒)"
          },
          "url": {
            "type": "string",
            "description": "语音文件URL"
          }
        },
        "required": [
          "duration",
          "url"
        ]
      },
      "LinkMetadata": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "链接URL"
          },
          "title": {
            "type": "string",
            "description": "链接标题"
          },
          "description": {
            "type": "string",
            "description": "链接描述"
          },
          "thumbnail": {
            "type": "string",
            "description": "链接缩略图"
          }
        },
        "required": [
          "url"
        ]
      },
      "ImageMetadata": {
        "type": "object",
        "properties": {
          "width": {
            "type": "number",
            "description": "图片宽度"
          },
          "height": {
            "type": "number",
            "description": "图片高度"
          },
          "url": {
            "type": "string",
            "description": "图片URL"
          },
          "thumbnail": {
            "type": "string",
            "description": "缩略图URL"
          }
        },
        "required": [
          "width",
          "height",
          "url"
        ]
      },
      "VideoMetadata": {
        "type": "object",
        "properties": {
          "duration": {
            "type": "number",
            "description": "视频时长(秒)"
          },
          "width": {
            "type": "number",
            "description": "视频宽度"
          },
          "height": {
            "type": "number",
            "description": "视频高度"
          },
          "url": {
            "type": "string",
            "description": "视频URL"
          },
          "thumbnail": {
            "type": "string",
            "description": "视频缩略图"
          }
        },
        "required": [
          "duration",
          "width",
          "height",
          "url"
        ]
      },
      "CreateMessageDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "消息内容"
          },
          "type": {
            "type": "string",
            "enum": [
              "TEXT",
              "VOICE",
              "FILE",
              "LINK",
              "IMAGE",
              "VIDEO"
            ],
            "description": "消息类型",
            "example": "TEXT"
          },
          "metadata": {
            "description": "消息元数据",
            "oneOf": [
              {
                "$ref": "#/components/schemas/TextMetadata"
              },
              {
                "$ref": "#/components/schemas/FileMetadata"
              },
              {
                "$ref": "#/components/schemas/VoiceMetadata"
              },
              {
                "$ref": "#/components/schemas/LinkMetadata"
              },
              {
                "$ref": "#/components/schemas/ImageMetadata"
              },
              {
                "$ref": "#/components/schemas/VideoMetadata"
              }
            ]
          },
          "senderId": {
            "type": "number",
            "description": "发送者ID",
            "example": 1
          },
          "receiverId": {
            "type": "number",
            "description": "接收者ID",
            "example": 2
          },
          "chatId": {
            "type": "number",
            "description": "聊天室ID",
            "example": 1
          },
          "status": {
            "type": "string",
            "enum": [
              "SENT",
              "DELIVERED",
              "READ"
            ],
            "description": "消息状态",
            "example": "SENT"
          }
        },
        "required": [
          "content",
          "type",
          "senderId",
          "receiverId",
          "chatId"
        ]
      },
      "UpdateMessageDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "消息内容"
          },
          "type": {
            "type": "string",
            "enum": [
              "TEXT",
              "VOICE",
              "FILE",
              "LINK",
              "IMAGE",
              "VIDEO"
            ],
            "description": "消息类型"
          },
          "metadata": {
            "description": "消息元数据",
            "oneOf": [
              {
                "$ref": "#/components/schemas/TextMetadata"
              },
              {
                "$ref": "#/components/schemas/FileMetadata"
              },
              {
                "$ref": "#/components/schemas/VoiceMetadata"
              },
              {
                "$ref": "#/components/schemas/LinkMetadata"
              },
              {
                "$ref": "#/components/schemas/ImageMetadata"
              },
              {
                "$ref": "#/components/schemas/VideoMetadata"
              }
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "SENT",
              "DELIVERED",
              "READ"
            ],
            "description": "消息状态"
          }
        }
      },
      "UpdateMessageStatusDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "SENT",
              "DELIVERED",
              "READ"
            ],
            "description": "消息状态"
          }
        },
        "required": [
          "status"
        ]
      },
      "CreateUserDto": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "example": "user1",
            "description": "用户名"
          },
          "password": {
            "type": "string",
            "example": "encrypted_password",
            "description": "加密后的密码"
          }
        },
        "required": [
          "username",
          "password"
        ]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "example": "user1",
            "description": "用户名"
          },
          "password": {
            "type": "string",
            "example": "encrypted_password",
            "description": "加密后的密码"
          }
        },
        "required": [
          "username",
          "password"
        ]
      },
      "CreateFriendRequestDto": {
        "type": "object",
        "properties": {
          "toId": {
            "type": "number",
            "description": "接收者ID"
          },
          "message": {
            "type": "string",
            "description": "请求消息"
          }
        },
        "required": [
          "toId"
        ]
      },
      "UpdateFriendRequestDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "ACCEPTED",
              "REJECTED"
            ],
            "description": "请求状态"
          }
        },
        "required": [
          "status"
        ]
      },
      "CreateMeetingDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "会议标题"
          }
        },
        "required": [
          "title"
        ]
      },
      "CreateDocumentDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "文档标题"
          },
          "type": {
            "type": "string",
            "description": "文档类型",
            "enum": [
              "word",
              "excel"
            ]
          }
        },
        "required": [
          "title",
          "type"
        ]
      },
      "AddCollaboratorDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "number",
            "description": "用户ID"
          },
          "role": {
            "type": "string",
            "description": "协作者角色",
            "enum": [
              "editor",
              "viewer"
            ]
          }
        },
        "required": [
          "userId",
          "role"
        ]
      }
    }
  }
}